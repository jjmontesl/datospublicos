<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    
    <link rel="stylesheet" type="text/css" href="static/css/blueprint/screen.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="static/css/cv-dvmi.css" media="screen" />
    
    <!-- CubesViewer CSS resources -->
    <link type="text/css" rel="stylesheet" href="static/css/jqueryui-cupertino/jquery-ui-1.9.2.custom.css" />
    <link type="text/css" rel="stylesheet" href="static/css/jqgrid/ui.jqgrid.css" media="screen" />
    <link type="text/css" rel="stylesheet" href="static/js/qtip/jquery.qtip.css"  />    
    <link type="text/css" rel="stylesheet" href="static/js/wiky/wiky.math.css" />
    <link type="text/css" rel="stylesheet" href="static/js/nvd3/nv.d3.min.css" />    
    
    <link type="text/css" rel="stylesheet" href="static/css/cubesviewer/cubesviewer.css" />

    <!-- CubesViewer JS dependencies -->
    
    <script type="text/javascript" src="static/js/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="static/js/jquery/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" src="static/js/jquery/jquery.cookie.js"></script> 
    
    <script type="text/javascript" src="static/js/dateformat/dateformat.js"></script>

    <script type="text/javascript" src="static/js/jquery/jquery.blockUI.js"></script>

    <script type="text/javascript" src="static/js/wiky/wiky.js"></script>
    <script type="text/javascript" src="static/js/wiky/wiky.math.js"></script>
    <script type="text/javascript" src="static/js/flotr2/flotr2.min.js"></script>

    <script type="text/javascript" src="static/js/d3js/d3.v3.js"></script>
    <script type="text/javascript" src="static/js/nvd3/nv.d3.js"></script>
    <script type="text/javascript" src="static/js/qtip/jquery.qtip.js"></script>

    <script type="text/javascript" src="static/js/jqgrid/i18n/grid.locale-en.js" ></script>
    <script type="text/javascript" src="static/js/jqgrid/jquery.jqGrid.min.js" ></script>
    
    <!-- Cubesviewer modules -->
    
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.cache.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.googleanalytics.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.model.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.explore.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.datefilter.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.rangefilter.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.series.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.chart.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.facts.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.dimensionfilter.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.columns.js"></script> 
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.cube.export.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.views.undo.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.gui.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.gui.serializing.js"></script>
    <script type="text/javascript" src="static/js/cubesviewer/cubesviewer.gui.localeswitcher.js"></script>
    
    <title>DatosPublicos.org.es - Visor de Presupuestos Generales del Estado</title>
    
<script type="text/javascript">
    
    // Initialize CubesViewer when document is ready
    $(document).ready(function() {
        
        //var cubesUrl = prompt ("Enter your Cubes Server URL", "http://localhost:5000");
        var cubesUrl = "http://datospublicos.org.es/cubes";
        
        // Add views
        $(document).bind("cubesviewerModelLoaded", { }, function() {
            $('.cv-demo-example-view').slice(0, 4).click();
        });
        
        cubesviewer.init({
            cubesUrl: cubesUrl
        });
        
        cubesviewer.gui.init({
            container: $('#cubesviewer').get(0)
        });
        
        // Start Cubesviewer system
        cubesviewer.refresh();
        
        // Some predefined views
        $('.cv-gui-tools').parent().before (
        	    '<div class="cv-gui-panelsection"><h3>Vistas predefinidas</h3>' +
        	    '<a href="#" class="cv-demo-example-view" data-demo="1">Censo anual</a><br />' +
        	    '<a href="#" class="cv-demo-example-view" data-demo="2">Censo por Autonomía anual</a><br />' +
        	    '<a href="#" class="cv-demo-example-view" data-demo="3">Gasto por Autonomía anual</a><br />' +
        	    '<a href="#" class="cv-demo-example-view" data-demo="4">Presupuestos Generales anual</a><br />' +
        	    '</div>'
        );
        $('.cv-demo-example-view').click(function() {
        	var demo = $(this).attr("data-demo");
        	var serialized = null;
        	if (demo == 1) {
        		   serialized = '{"cubename":"ccaa_census","name":"Censo anual","mode":"chart","drilldown":["genre"],"cuts":[],"datefilters":[],"xaxis":"date_year","yaxis":"amount_sum","charttype":"bars-vertical","columnHide":{},"columnWidths":{},"columnSort":{}}';	
        	} else if (demo == 2) {
        		serialized = '{"cubename":"ccaa_census","name":"Censo anual","mode":"chart","drilldown":["ccaa"],"cuts":[],"datefilters":[],"xaxis":"date_year","yaxis":"amount_sum","charttype":"lines-stacked","columnHide":{},"columnWidths":{},"columnSort":{}}';
        	} else if (demo == 3) {
        		serialized = '{"cubename":"ccaa_budget","name":"Gasto por Autonomia anual","mode":"chart","drilldown":["ccaa"],"cuts":[],"datefilters":[],"xaxis":"date_year","yaxis":"amount_sum","charttype":"lines","columnHide":{},"columnWidths":{},"columnSort":{}}';
        	} else if (demo == 4) {
        		serialized = '{"cubename":"pge_expenses","name":"Presupuestos Generales anual","mode":"series","drilldown":["pge_organisms:pge_section"],"cuts":[{"dimension":"date_year","value":"2008;2009;2010;2011;2012;2013;2014P"}],"datefilters":[],"xaxis":"date_year","yaxis":"amount_sum","charttype":"bars-vertical","columnHide":{},"columnWidths":{"key0":322,"2008":126,"2009":136,"2010":125,"2011":124,"2012":132,"2013":116,"2014P":117},"columnSort":{"series":["2014P","desc"]}}';
        	} 
        	
        	if (serialized != null) {
            	var view = cubesviewer.gui.addViewObject(serialized);
                cubesviewer.views.redrawView (view);
        	}
        });
        
        
    });
    
</script>
    
    
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <div style="background-image: url(static/img/datospublicos-front.png); ">
            <header>
              <div style="float: left; margin: 5px; background-color: #f8f8ff;">
                      <img src="static/img/datospublicos-profile.png" style="float: left; width: 120px; height: 120px; margin: 5px 20px 5px 5px;" />
                      <div style="padding-top: 20px;">
                      <h1 >datosPublicos<span style="color: #ffc400;">.org</span><span style="color: #c60b1e ;">.es</span></h1>
                      <h2>Visor de Presupuestos Generales del Estado</h2>
                      </div>
              </div>
              <div style="clear: both;"></div>
            </header>   
        </div>
        
        <section id="main_content">
        
            <p style="margin-top: 15px; ">
            <p>
            
        </section>

        <!-- Cubes Viewer GUI container -->
        <div id="cubesviewer">
        
            <div class="cv-gui-panel ui-widget ui-widget-content ui-corner-all" >
            </div>
            
            <div class="cv-gui-workspace" style="min-height: 400px;">
            </div>
        
        </div>        

        <footer>
          <p style="text-align: center; margin-top: 20px;">Sitio creado y mantenido por <a href="https://twitter.com/jjmontes">Jose Juan Montes</a>, 
            con la colaboración de 
            <a href="https://twitter.com/mateobur">Mateo Burillo</a> y <a href="http://www.pabloarias.eu/">Pablo Arias</a>. 
            Está basado en los datos procesados y puestos a disposición de todos por 
            <a href="http://dondevanmisimpuestos.es/">¿Dónde van mis impuestos?</a>.
            La herramienta utilizada es 
            <a href="https://github.com/jjmontesl/cubesviewer">CubesViewer</a>.
            </p>
        </footer>
        
      </div>
    </div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6169223-5']); // datospublicos.org.es
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  function eventLogTimeGoogleAnalytics() {
	  _gaq.push(['_trackEvent', 'Time', 'Ping']);
  }
  setInterval( eventLogTimeGoogleAnalytics, 30000 );
  
</script>

  </body>
</html>